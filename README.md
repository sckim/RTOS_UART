# BLE RTOS 센서 노드 프로젝트

이 프로젝트는 FreeRTOS를 기반으로 하는 BLE 센서 노드의 구현이다. ADC 데이터를 수집하고 BLE UART를 통해 전송하며, LED 표시와 버튼 입력을 처리하는 기능을 포함한다.

## 주요 기능
- BLE UART 통신
- ADC 데이터 수집 및 전송
- LED 상태 표시 (짧은/중간/긴 점멸)
- 버튼 입력 처리 (짧은/중간/긴 누름)
- FreeRTOS 기반 태스크 관리
- 에러 처리 및 시스템 상태 모니터링

## 하드웨어 요구사항
- nRF52840 기반 보드 (Adafruit nRF52840 또는 호환 보드)
- LED (기본 내장 LED 사용), P3
- 푸시 버튼, P5
- ADC 입력용 센서, A0

## 소프트웨어 요구사항
- Adafruit nRF52 보드 패키지
- FreeRTOS 라이브러리
- Adafruit Bluefruit 라이브러리

## 설정  
### 하드웨어 연결
- LED_PIN: LED_BUILTIN (기본 내장 LED)
- BUTTON_PIN: 5
- ADC_PIN: A0

### 시스템 설정 (config.h)
- BLE MTU 크기: 20 바이트
- 큐 크기: 10
- ADC 샘플링 시간: 100ms

## BLE 통신 프로토콜

### 명령어 구조
- LED 제어 (0x01)
- 시스템 상태 요청 (0x02)
- 대용량 데이터 전송 (0x03)
- 시스템 진단 (0x04)
- ADC 데이터 요청 (0x05)

### 데이터 패킷 구조
- 시작 패킷: 0x10
- 데이터 청크: 0x11
- 종료 패킷: 0x12

## 사용 방법

1. 하드웨어 설정
   - 보드에 LED, 버튼, ADC 센서 연결
   - 전원 공급

2. 펌웨어 업로드
   - Arduino IDE에서 프로젝트 열기
   - 보드 및 포트 선택
   - 컴파일 및 업로드

3. 파이썬 클라이언트 실행
   ```bash
   python main.py
   ```

4. BLE 연결 및 테스트
   - 메뉴에서 원하는 테스트 항목 선택
   - LED 제어, 시스템 상태 확인, 데이터 전송 테스트 실행

## 주의사항

- BLE 연결이 끊어질 경우 자동으로 재연결을 시도한다.
- 대용량 데이터 전송 시 버퍼 크기 제한에 주의한다.
- ADC 샘플링 속도는 시스템 성능에 영향을 줄 수 있다.

## 향후 개선사항

- [ ] 전력 소비 최적화
- [ ] 에러 복구 메커니즘 강화
- [ ] 데이터 압축 기능 추가
- [ ] 보안 기능 강화

## 라이선스

이 프로젝트는 MIT 라이선스로 제공된다.
